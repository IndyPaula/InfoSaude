<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="relatorio_vacina_data_validade" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="93123e78-391d-47f0-85d7-1e6794293746">
	<property name="ireport.zoom" value="2.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="data_inicial" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="data_fim" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT
     vacina_estoque_anterior($P{data_inicial},vacina."nome") AS vacina_estoque_anterior,
     vacina_doses_distribuidas_utilizadas($P{data_inicial},$P{data_fim},vacina."nome") AS vacina_doses_distribuidas_utilizadas,
     vacina_quantidade_estoque(vacina."id") AS vacina_quantidade_estoque,
     vacina_quantidade_remanejada(vacina."id",$P{data_inicial},$P{data_fim}) AS vacina_quantidade_remanejada,
     vacina_quantidade_inutilizada(vacina."id",$P{data_inicial},$P{data_fim}) AS vacina_quantidade_inutilizada,
     unidade_saude."numero" AS unidade_saude_numero,
     unidade_saude."endereco_cidade" AS unidade_saude_endereco_cidade,
     vacina."nome" AS vacina_nome,
     vacina."data_vencimento" AS vacina_data_vencimento,
     vacina."data_cadastro" AS vacina_data_cadastro,
     vacina."data_fabricacao" AS vacina_data_fabricacao,
     vacina."laboratorio" AS vacina_laboratorio,
     vacina."lote" AS vacina_lote
FROM
     "public"."vacina" vacina,
     "public"."unidade_saude" unidade_saude
WHERE
     vacina."data_vencimento" BETWEEN $P{data_inicial} and $P{data_fim}]]>
	</queryString>
	<field name="vacina_estoque_anterior" class="java.lang.Long"/>
	<field name="vacina_doses_distribuidas_utilizadas" class="java.lang.Long"/>
	<field name="vacina_quantidade_estoque" class="java.lang.Long"/>
	<field name="vacina_quantidade_remanejada" class="java.lang.Long"/>
	<field name="vacina_quantidade_inutilizada" class="java.lang.Long"/>
	<field name="unidade_saude_numero" class="java.lang.Integer"/>
	<field name="unidade_saude_endereco_cidade" class="java.lang.String"/>
	<field name="vacina_nome" class="java.lang.String"/>
	<field name="vacina_data_vencimento" class="java.sql.Date"/>
	<field name="vacina_data_cadastro" class="java.sql.Date"/>
	<field name="vacina_data_fabricacao" class="java.sql.Date"/>
	<field name="vacina_laboratorio" class="java.lang.String"/>
	<field name="vacina_lote" class="java.lang.String"/>
	<variable name="vacina_quantidade_doses_1" class="java.lang.Integer" resetType="Column" calculation="Sum">
		<variableExpression><![CDATA[]]></variableExpression>
	</variable>
	<filterExpression><![CDATA[new Boolean(true)]]></filterExpression>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="79" splitType="Stretch">
			<staticText>
				<reportElement x="4" y="47" width="117" height="32" uuid="2a65f5e0-a9f8-45b7-87d0-49606b08b20e"/>
				<textElement verticalAlignment="Middle">
					<font size="10" isBold="true"/>
				</textElement>
				<text><![CDATA[Ministério da Saúde CENEPI / COPNI]]></text>
			</staticText>
			<staticText>
				<reportElement x="136" y="31" width="322" height="32" uuid="eae684cf-f577-4d7a-9a89-17a17beee2a2"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[5ª GERÊNCIA REGIONAL DE SAÚDE]]></text>
			</staticText>
			<image>
				<reportElement x="0" y="0" width="157" height="44" uuid="721591c6-bafc-4950-a836-78a18fc88568"/>
				<imageExpression><![CDATA["/home/jefferson/NetBeansProjects/InfoSaude/Sistema/003-Implementacao/src/main/webapp/resources/imagens/info_saude relatório.jpg"]]></imageExpression>
			</image>
			<image>
				<reportElement x="479" y="0" width="62" height="79" uuid="d033a2de-bb34-483f-99d4-5b94f0516af0"/>
				<imageExpression><![CDATA["/home/jefferson/NetBeansProjects/InfoSaude/Sistema/003-Implementacao/src/main/webapp/resources/imagens/Brasao_monteiro.jpg"]]></imageExpression>
			</image>
		</band>
	</title>
	<pageHeader>
		<band height="79" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="555" height="35" uuid="843f3dcc-5fee-45a9-a51c-d6151268f3c8"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[MOVIMENTO MENSAL DE IMUNOBIOLÓGICO POR PERIODO DE VENCIMENTO]]></text>
			</staticText>
			<textField pattern="dd MMMMM yyyy">
				<reportElement x="0" y="63" width="157" height="15" uuid="ceb89967-d17d-47f1-a26a-2f5d81606e33"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="46" width="157" height="17" uuid="3519ed89-e93a-4c86-ab32-8f06adf0b02d"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Data]]></text>
			</staticText>
			<staticText>
				<reportElement x="157" y="46" width="265" height="17" uuid="e0a4d0b9-2ce8-490d-91c4-38351b286c00"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Municipio]]></text>
			</staticText>
			<staticText>
				<reportElement x="422" y="46" width="133" height="17" uuid="b9dfe9b2-504e-4624-9ffc-af9860eda68f"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="0.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Unidade de Saúde]]></text>
			</staticText>
			<textField>
				<reportElement x="422" y="62" width="133" height="16" uuid="52323683-3035-430c-ba2e-f639e7ab7549"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{unidade_saude_numero} != null ? $F{unidade_saude_numero} : "-"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="157" y="63" width="265" height="15" uuid="243cd603-378d-4c2f-a946-1c72a2f5db7f"/>
				<box>
					<pen lineWidth="1.0"/>
					<topPen lineWidth="0.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{unidade_saude_endereco_cidade} != null ?
$F{unidade_saude_endereco_cidade} : "-"]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="32" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="12" width="555" height="20" backcolor="#D9D9D9" uuid="e883d891-83b3-4677-8582-9f78b8fb5953"/>
			</rectangle>
			<staticText>
				<reportElement x="0" y="12" width="155" height="20" uuid="88acd7ae-1150-4594-9ec0-d8089cc5e6c8"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Imunobiológico]]></text>
			</staticText>
			<staticText>
				<reportElement x="155" y="12" width="100" height="20" uuid="bdbdea9c-3e01-450a-8a85-0de4633537a8"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Laboratório]]></text>
			</staticText>
			<staticText>
				<reportElement x="255" y="12" width="100" height="20" uuid="29c91816-510a-45f4-be73-e14179fb8e7b"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Lote]]></text>
			</staticText>
			<staticText>
				<reportElement x="355" y="12" width="100" height="20" uuid="6c361c3b-5552-4551-a8c1-00ab30bcd9cb"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Data de Venc.]]></text>
			</staticText>
			<staticText>
				<reportElement x="455" y="12" width="100" height="20" uuid="191113fd-5183-48bf-994d-a8c1a1b0d903"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Quant. Estoque]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="0" width="555" height="20" forecolor="#FEFEFE" backcolor="#B6EDFD" uuid="1bfc7386-613f-48da-a300-7ddf35da60f1">
					<printWhenExpression><![CDATA[new Boolean(($V{COLUMN_COUNT}.intValue() % 2) == 0) ]]></printWhenExpression>
				</reportElement>
			</rectangle>
			<textField>
				<reportElement x="0" y="0" width="155" height="20" uuid="881f7374-dd7a-44f9-8ec1-d55438542bdf"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vacina_nome} != null ? $F{vacina_nome}: "-"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="155" y="0" width="100" height="20" uuid="706710ed-a5a6-4ea0-9354-de42f6fca894"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vacina_laboratorio}  != null ? $F{vacina_laboratorio}: "-"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="255" y="0" width="100" height="20" uuid="bc4b7f85-713c-4956-9b0b-fe36bed8f7a2"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vacina_lote}  != null ? $F{vacina_lote}: "-"]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="355" y="0" width="100" height="20" uuid="67f8c82f-7c4c-4cdc-a0a6-810fca78aa2c"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vacina_data_vencimento}  != null ? $F{vacina_data_vencimento}: "-"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="455" y="0" width="100" height="20" uuid="9169f760-0aab-4537-beb0-04e89e14031f"/>
				<box leftPadding="4">
					<pen lineWidth="1.0"/>
					<topPen lineWidth="1.0"/>
					<leftPen lineWidth="1.0"/>
					<bottomPen lineWidth="1.0"/>
					<rightPen lineWidth="1.0"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{vacina_quantidade_estoque}  != null ? $F{vacina_quantidade_estoque}: "-"]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="54" splitType="Stretch">
			<textField>
				<reportElement x="455" y="34" width="100" height="20" uuid="d5df6397-2789-47ca-abbd-7720fc81f0ed"/>
				<textFieldExpression><![CDATA["Página: "+$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="0" y="34" width="422" height="20" uuid="574c27fb-4e17-4da8-9c43-27935d4340a7"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA["Dados correspondem ao periodo de "
+ $P{data_inicial}.toLocaleString().replace("00","").replace(":","") +
" a " + $P{data_fim}.toLocaleString().replace("00","").replace(":","")]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
</jasperReport>
